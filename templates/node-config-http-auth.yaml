# Hysteria 2 config template with HTTP authentication
# 
# Variables:
#   {{PORT}} - main port (443)
#   {{AUTH_URL}} - URL for HTTP authentication (https://your-backend.com/api/auth)
#   {{CERT_PATH}} - path to certificate
#   {{KEY_PATH}} - path to key
#   {{STATS_SECRET}} - secret for the stats API

listen: :{{PORT}}

# TLS
tls:
  cert: {{CERT_PATH}}
  key: {{KEY_PATH}}
  sniGuard: strict

# Sniffing to detect protocol
sniff:
  enable: true
  timeout: 2s
  rewriteDomain: false
  tcpPorts: 80,443,8000-9000
  udpPorts: 443,80,53

# QUIC settings
quic:
  initStreamReceiveWindow: 8388608
  maxStreamReceiveWindow: 8388608
  initConnReceiveWindow: 20971520
  maxConnReceiveWindow: 20971520
  maxIdleTimeout: 60s
  maxIncomingStreams: 256
  disablePathMTUDiscovery: false

# HTTP authentication - requests go to the backend
auth:
  type: http
  http:
    url: {{AUTH_URL}}
    insecure: false

# Bandwidth
ignoreClientBandwidth: false

# Masquerade as Google
masquerade:
  type: proxy
  proxy:
    url: https://www.google.com
    rewriteHost: true

# ACL
acl:
  inline:
    - reject(geoip:cn)
    - reject(geoip:private)

# Stats API (for traffic collection and kick)
trafficStats:
  listen: 127.0.0.1:9999
  secret: {{STATS_SECRET}}
















































