<div class="page-header">
    <a href="/panel/users" class="btn btn-back">← Назад к списку</a>
</div>

<div class="card">
    <div class="card-header">
        <h2>Новый пользователь</h2>
    </div>
    <div class="card-body">
        <form method="POST" action="/panel/users" class="form">
            <div class="form-row">
                <div class="form-group">
                    <label for="userId">User ID *</label>
                    <input type="text" id="userId" name="userId" placeholder="Telegram ID или уникальный ID" required>
                    <small>Уникальный идентификатор пользователя</small>
                </div>
                
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="@username">
                    <small>Опционально, для отображения</small>
                </div>
            </div>
            
                <div class="form-group">
                <label>Группы серверов</label>
                <div class="groups-select">
                    <% if (groups && groups.length > 0) { %>
                        <% groups.forEach(group => { %>
                            <label class="checkbox-tag" style="border-color: <%= group.color %>">
                                <input type="checkbox" name="groups" value="<%= group._id %>">
                                <span class="tag-dot" style="background: <%= group.color %>"></span>
                                <span><%= group.name %></span>
                            </label>
                        <% }); %>
                    <% } else { %>
                        <p class="hint">Нет групп. <a href="/panel/groups">Создайте группу</a></p>
                    <% } %>
                </div>
                <small>Пользователь получит доступ к нодам из этих групп. Если не выбрано — доступ ко всем нодам без групп.</small>
                </div>
                
            <div class="form-row">
                <div class="form-group">
                    <label for="trafficLimit">Лимит трафика (ГБ)</label>
                    <input type="number" id="trafficLimit" name="trafficLimitGB" placeholder="0" value="0" min="0">
                    <small>0 = без ограничений</small>
            </div>
            
                    <div class="form-group">
                    <label for="maxDevices">Лимит устройств</label>
                    <input type="number" id="maxDevices" name="maxDevices" placeholder="0" value="0" min="-1">
                    <small>0 = лимит группы, -1 = безлимит</small>
                </div>
            </div>
            
            <div class="form-group">
                <label for="expireDays">Срок действия (дней)</label>
                <input type="number" id="expireDays" name="expireDays" placeholder="30" value="30" min="0">
                <small>0 = бессрочно</small>
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="enabled" checked>
                    Активировать сразу
                </label>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Создать пользователя</button>
                <a href="/panel/users" class="btn">Отмена</a>
            </div>
        </form>
    </div>
</div>


